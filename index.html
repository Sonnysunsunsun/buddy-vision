<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="description" content="Buddy Vision - Universal AI Visual Assistant for LA 2028 Olympics. Instant descriptions, translations, and navigation help for all visitors.">
    <meta name="theme-color" content="#0066CC">
    <title>Buddy Vision - Universal AI Assistant for LA 2028</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header role="banner">
        <div class="header-content">
            <h1 id="app-title">
                <span aria-label="Buddy Vision">Buddy Vision</span>
            </h1>
            <p class="tagline">AI Navigation Assistant for LA 2028</p>
            <div id="partner-badge" class="partner-badge" aria-live="polite"></div>
        </div>
    </header>

    <!-- Language Selector -->
    <section class="language-selector-section" aria-labelledby="language-selector-label">
        <label id="language-selector-label" for="language-select" class="language-label">
            <span class="label-icon" aria-hidden="true">ğŸŒ</span>
            <span class="label-text">Select Your Language</span>
        </label>
        <select id="language-select" class="language-select" aria-label="Choose language for voice output">
            <option value="en-US">English (United States)</option>
            <option value="en-GB">English (United Kingdom)</option>
            <option value="en-AU">English (Australia)</option>
            <option value="en-CA">English (Canada)</option>
            <option value="en-IN">English (India)</option>
            <option value="es-ES">EspaÃ±ol (EspaÃ±a)</option>
            <option value="es-MX">EspaÃ±ol (MÃ©xico)</option>
            <option value="es-AR">EspaÃ±ol (Argentina)</option>
            <option value="es-US">EspaÃ±ol (Estados Unidos)</option>
            <option value="fr-FR">FranÃ§ais (France)</option>
            <option value="fr-CA">FranÃ§ais (Canada)</option>
            <option value="de-DE">Deutsch (Deutschland)</option>
            <option value="it-IT">Italiano (Italia)</option>
            <option value="pt-BR">PortuguÃªs (Brasil)</option>
            <option value="pt-PT">PortuguÃªs (Portugal)</option>
            <option value="nl-NL">Nederlands (Nederland)</option>
            <option value="nl-BE">Nederlands (BelgiÃ«)</option>
            <option value="ru-RU">Ğ ÑƒÑÑĞºĞ¸Ğ¹ (Ğ Ğ¾ÑÑĞ¸Ñ)</option>
            <option value="ja-JP">æ—¥æœ¬èª (æ—¥æœ¬)</option>
            <option value="ko-KR">í•œêµ­ì–´ (ëŒ€í•œë¯¼êµ­)</option>
            <option value="zh-CN">ä¸­æ–‡ (ç®€ä½“)</option>
            <option value="zh-TW">ä¸­æ–‡ (ç¹é«”)</option>
            <option value="zh-HK">ä¸­æ–‡ (é¦™æ¸¯)</option>
            <option value="ar-SA">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©)</option>
            <option value="ar-EG">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (Ù…ØµØ±)</option>
            <option value="hi-IN">à¤¹à¤¿à¤¨à¥à¤¦à¥€ (à¤­à¤¾à¤°à¤¤)</option>
            <option value="tr-TR">TÃ¼rkÃ§e (TÃ¼rkiye)</option>
            <option value="pl-PL">Polski (Polska)</option>
            <option value="sv-SE">Svenska (Sverige)</option>
            <option value="nb-NO">Norsk (Norge)</option>
            <option value="da-DK">Dansk (Danmark)</option>
            <option value="fi-FI">Suomi (Suomi)</option>
            <option value="el-GR">Î•Î»Î»Î·Î½Î¹ÎºÎ¬ (Î•Î»Î»Î¬Î´Î±)</option>
            <option value="he-IL">×¢×‘×¨×™×ª (×™×©×¨××œ)</option>
            <option value="th-TH">à¹„à¸—à¸¢ (à¹„à¸—à¸¢)</option>
            <option value="vi-VN">Tiáº¿ng Viá»‡t (Viá»‡t Nam)</option>
            <option value="id-ID">Bahasa Indonesia (Indonesia)</option>
            <option value="ms-MY">Bahasa Melayu (Malaysia)</option>
            <option value="fil-PH">Filipino (Pilipinas)</option>
            <option value="cs-CZ">ÄŒeÅ¡tina (ÄŒesko)</option>
            <option value="sk-SK">SlovenÄina (Slovensko)</option>
            <option value="hu-HU">Magyar (MagyarorszÃ¡g)</option>
            <option value="ro-RO">RomÃ¢nÄƒ (RomÃ¢nia)</option>
            <option value="bg-BG">Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸ (Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€Ğ¸Ñ)</option>
            <option value="hr-HR">Hrvatski (Hrvatska)</option>
            <option value="sr-RS">Ğ¡Ñ€Ğ¿ÑĞºĞ¸ (Ğ¡Ñ€Ğ±Ğ¸Ñ˜Ğ°)</option>
            <option value="uk-UA">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ° (Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ°)</option>
            <option value="ca-ES">CatalÃ  (Espanya)</option>
            <option value="af-ZA">Afrikaans (Suid-Afrika)</option>
            <option value="is-IS">Ãslenska (Ãsland)</option>
            <option value="ta-IN">à®¤à®®à®¿à®´à¯ (à®‡à®¨à¯à®¤à®¿à®¯à®¾)</option>
            <option value="te-IN">à°¤à±†à°²à±à°—à± (à°­à°¾à°°à°¤à°¦à±‡à°¶à°‚)</option>
            <option value="bn-IN">à¦¬à¦¾à¦‚à¦²à¦¾ (à¦­à¦¾à¦°à¦¤)</option>
            <option value="ur-PK">Ø§Ø±Ø¯Ùˆ (Ù¾Ø§Ú©Ø³ØªØ§Ù†)</option>
        </select>
    </section>

    <main id="main-content" role="main" aria-label="Main content - tap anywhere to capture scene">
        <!-- Accessibility Note -->
        <div class="sr-only" role="status" aria-live="polite">
            Welcome to Buddy Vision: Your AI navigation assistant for LA 2028 Olympics.
            Capture any scene to identify your location, find LA28 workers nearby,
            and get directions to where you need to go.
        </div>

        <!-- REMOVED: Venue Selector - Blind users can't/shouldn't have to select location manually
             Location context should be detected from image content (signs, landmarks) or GPS -->

        <!-- Camera Preview -->
        <section class="camera-section" aria-labelledby="camera-label">
            <h2 id="camera-label" class="sr-only">Camera View</h2>
            <div class="camera-container">
                <video id="camera-preview" autoplay playsinline muted aria-label="Live camera preview"></video>
                <canvas id="capture-canvas" aria-hidden="true"></canvas>
            </div>
        </section>

        <!-- Main Action Button -->
        <section class="controls-section">
            <button
                id="capture-btn"
                class="capture-btn"
                type="button"
                aria-label="Capture scene to identify location and get navigation help"
            >
                <span class="btn-icon" aria-hidden="true">ğŸ“</span>
                <span class="btn-text">CAPTURE TO NAVIGATE</span>
            </button>
        </section>

        <!-- Quick Actions -->
        <section class="quick-actions">
            <button
                id="repeat-btn"
                class="quick-action-btn"
                type="button"
                aria-label="Repeat last description"
                disabled
            >
                <span class="btn-icon" aria-hidden="true">ğŸ”</span>
                <span class="btn-text">Repeat</span>
            </button>

            <button
                id="read-text-btn"
                class="quick-action-btn"
                type="button"
                aria-label="Read visible text for translation"
                disabled
            >
                <span class="btn-icon" aria-hidden="true">ğŸŒ</span>
                <span class="btn-text">Read Text</span>
            </button>
        </section>

        <!-- Status Messages -->
        <div id="status-messages" role="status" aria-live="polite" aria-atomic="true" class="status-container"></div>

        <!-- Description Output -->
        <section class="description-section" aria-labelledby="description-label">
            <h2 id="description-label" class="sr-only">AI Description</h2>
            <div id="description-output" class="description-output" aria-live="assertive" tabindex="0">
                <p class="placeholder-text">Capture the scene to identify your location and get navigation help for LA 2028</p>
            </div>
        </section>
    </main>

    <footer role="contentinfo">
        <p>Made for LA 2028 Olympics | <a href="#about">About</a> | <a href="#privacy">Privacy</a></p>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay" hidden aria-live="assertive" role="alert">
        <div class="loading-spinner"></div>
        <p id="loading-text">Processing...</p>
    </div>

    <!-- API Key Setup Modal (for development) -->
    <div id="api-setup-modal" class="modal" role="dialog" aria-labelledby="setup-title" aria-modal="true" hidden>
        <div class="modal-content">
            <h2 id="setup-title">API Setup Required</h2>
            <p>To use Buddy Vision, please enter your API keys (this is for demo purposes only):</p>

            <form id="api-setup-form">
                <label for="openai-key">OpenAI API Key:</label>
                <input type="password" id="openai-key" required aria-required="true">

                <label for="vision-key">Google Cloud Vision API Key:</label>
                <input type="password" id="vision-key" required aria-required="true">

                <button type="submit" class="primary-btn">Save Keys</button>
            </form>
        </div>
    </div>

    <script src="translations.js?v=20250116v2"></script>
    <script src="vision.js?v=20250116v2"></script>
    <script src="ai.js?v=20250116v2"></script>
    <script src="app.js?v=20250116v2"></script>
    <script src="voice.js?v=20250116v2"></script>

    <!-- Service Worker Registration -->
    <script>
        // Register service worker for PWA and offline support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('Service Worker registered successfully:', registration.scope);

                        // Check for updates periodically
                        setInterval(() => {
                            registration.update();
                        }, 60000); // Check every minute
                    })
                    .catch((error) => {
                        console.error('Service Worker registration failed:', error);
                    });
            });
        }

        // Handle install prompt for PWA
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;

            // Show install button (could be added to UI later)
            console.log('PWA install prompt available');
        });
    </script>
</body>
</html>
